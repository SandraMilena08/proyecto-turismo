<section class="search__sctn">
    <div class="categories__data" style="margin-top: 2rem;">
        <h2 class="section__title categories title">Reporte de <br> oferta turística</h2>      
        <p class="section__description search__description">            
            Se muestran los 5 planes o servicios turísticos más visitados de un municipio del Gualiva en un mes y año determinado.
        </p>
        <p class="section__description search__description">            
            Para generar un reporte, debes seleccionar el municipio de la región, el mes y el año y establecer la búsqueda entre planes o servicios turísticos.
        </p>
    </div>

    <div class="search">
        <div class="search__form">

            <div class="search__param"> <!--Municipio-->
                <div class="search__ddl-btn">
                    <div class="search__ddl-btn-info">
                        <span class="search__ddl-title">Municipio</span>
                        <p class="search__ddl-desc">{{ municipio }}</p>
                    </div>   
                    <i class="ri-arrow-down-s-line search__ddl-btn-icon"></i>
                </div>
                <ul class="search__ddl-items">
                    <li class="search__dll-item"
                        *ngFor="let mun of municipios; index as i"
                        [ngClass]="{ 'search__dll-item-active': mun.nombre == municipio }"
                        (click)="seleccionarMunicipio(mun.id)">
                        <i [ngClass]="{ 'ri-checkbox-circle-line': mun.nombre != mun, 'ri-checkbox-circle-fill': mun.nombre == mun }"></i>
                        <p class="search__dll-item-desc">{{ mun.nombre }}</p>
                    </li>
                </ul>
            </div>

            <div class="search__param"> <!-- Meses -->  
                <div class="search__ddl-btn">
                    <div class="search__ddl-btn-info">
                        <span class="search__ddl-title">Mes</span>
                        <p class="search__ddl-desc">{{ months[month-1].nombre }}</p>
                    </div>   
                    <i class="ri-arrow-down-s-line search__ddl-btn-icon"></i>
                </div>
                <ul class="search__ddl-items">
                    <li class="search__dll-item"
                        *ngFor="let mon of months; index as i"
                        [ngClass]="{ 'search__dll-item-active': mon.nombre == months[month-1].nombre }"
                        (click)="seleccionarMes(mon.id)">
                        <i [ngClass]="{ 'ri-checkbox-circle-line': mon.nombre != months[month-1].nombre, 'ri-checkbox-circle-fill': mon.nombre == months[month-1].nombre }"></i>
                        <p class="search__dll-item-desc">{{ mon.nombre }}</p>
                    </li>
                </ul>
            </div>

            <div class="search__param"> <!-- Años -->  
                <div class="search__ddl-btn">
                    <div class="search__ddl-btn-info">
                        <span class="search__ddl-title">Año</span>
                        <p class="search__ddl-desc">{{ year }}</p>
                    </div>   
                    <i class="ri-arrow-down-s-line search__ddl-btn-icon"></i>
                </div>
                <ul class="search__ddl-items">
                    <li class="search__dll-item"
                        *ngFor="let yr of years; index as i"
                        [ngClass]="{ 'search__dll-item-active': yr == year }"
                        (click)="seleccionarYear(yr)">
                        <i [ngClass]="{ 'ri-checkbox-circle-line': yr != year, 'ri-checkbox-circle-fill': yr == year }"></i>
                        <p class="search__dll-item-desc">{{ yr }}</p>
                    </li>
                </ul>
            </div>   

            <div class="search__param"> <!--Oferta turística-->
                <div class="search__ddl-btn">
                    <div class="search__ddl-btn-info">
                        <span class="search__ddl-title">Oferta turística</span>
                        <p class="search__ddl-desc">{{ ofertaTuristica }}</p>
                    </div>   
                    <i class="ri-arrow-down-s-line search__ddl-btn-icon"></i>
                </div>
                <ul class="search__ddl-items">
                    <li class="search__dll-item"
                        *ngFor="let ot of ofertasTuristicas; index as i"
                        [ngClass]="{ 'search__dll-item-active': ot == ofertaTuristica }"
                        (click)="seleccionarOfertaTuristica(ot)">
                        <i [ngClass]="{ 'ri-checkbox-circle-line': ot != ofertaTuristica, 'ri-checkbox-circle-fill': ot == ofertaTuristica }"></i>
                        <p class="search__dll-item-desc">{{ ot }}</p>
                    </li>
                </ul>
            </div>

            <div class="search__param search__param-disabled"></div>                

            <div class="search__submit-btn">
                <button type="button" (click)="generarReporte()">Generar reporte</button>
            </div>

        </div>
    </div>
</section>
<app-no-report *ngIf="!barChartData && !barChartLabels"></app-no-report>
<section class="chart-section" *ngIf="barChartData && barChartLabels"> 
    <div style="display: block">
        <canvas baseChart
          [datasets]="barChartData"
          [labels]="barChartLabels"
          [options]="barChartOptions"          
          [legend]="barChartLegend"
          [chartType]="barChartType">
        </canvas>
      </div>
</section>